<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Simple WS Test</title>
</head>
<body>
  <h1>Simple WebSocket Test</h1>
  <button id="btn">Send "Hello"</button>
  <div id="status">Connecting...</div>
  <div id="log"></div>

  <script>
    const statusEl = document.getElementById("status");
    const logEl = document.getElementById("log");
    const btn = document.getElementById("btn");

    // Поставь сюда реальный адрес своего туннеля (пример)
    const WS_URL = "wss://dnjzwnbf-8080.euw.devtunnels.ms/ws";

    let ws = new WebSocket(WS_URL);

    ws.onopen = () => {
      statusEl.textContent = "Connected";
      logEl.innerHTML += "<p>WS connected</p>";
    };

    ws.onerror = (e) => {
      statusEl.textContent = "Error";
      logEl.innerHTML += "<p>WS error</p>";
      console.error("WebSocket error", e);
    };

    ws.onclose = (e) => {
      statusEl.textContent = `Closed (${e.code})`;
      logEl.innerHTML += `<p>WS closed (${e.code})</p>`;
    };

    ws.onmessage = (msg) => {
      logEl.innerHTML += `<p>Server: ${msg.data}</p>`;
    };

    btn.onclick = () => {
      if (ws.readyState === WebSocket.OPEN) {
        ws.send("Hello from client");
        logEl.innerHTML += "<p>Sent: Hello from client</p>";
      } else {
        alert("WebSocket is not connected");
      }
    };
  </script>
</body>
</html>
